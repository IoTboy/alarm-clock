# Smart Alarm Clock

Most people would agree that it's hard to get up in the morning. Wouldn't it be nice to make that process smarter? This project lets you create a "smart" alarm clock out of an Intel Edison. You can set the alarm time using your smart phone via the built-in web interface, live weather data is displayed on the LCD. Not only that, but for fans of the "quantifie self" movement, the alarm clock keeps track of how long it takes you to wake up each day using cloud-based data storage.

The "smart" alarm clock requires the following components from the Grove Starter Kit Plus:

1. Intel Edison with Arduino breakout board
2. Grove Rotary Analog Sensor
3. Grove Buzzer
4. Grove Button
5. Grove RGB LCD Display

## How It Works

This "smart" alarm clock has a number of useful features.
Set the alarm time using a web page served directly from the Edison itself, using your mobile phone.
When the alarm goes off, the buzzer sounds, and the LCD display indicates its time to get up.
The rotary dial can be used to adjust the brightness of the display.

In addition, the smart alarm clock can access daily weather data via the Weather Underground API, and use it to change the color of the LCD display.

All data can also optionally be stored using the "Intel IoT Example Datastore" running on your own Microsoft Azure account.

### How To Setup

To begin, clone the Intel IoT Examples with git on your computer:

    $ git clone https://github.com/hybridgroup/intel-iot-examples.git

Not sure how to do that? [Here is an excellent guide from Github on how to get started](https://help.github.com/desktop/guides/getting-started/).

## Adding to Intel XDK IoT

With the [Intel XDK Internet Of Things Edition] open, select the "Import Your Node.js Project" option:

![](./../../../images/xdk-menu.png)

Then, navigate to the directory where the example project exists, and select it:

![](./../../../images/xdk-select.png)

You will need to connect to your Edison board from your computer to send code to it.
Choose the "Add Manual Connection" from the "IoT Device" menu located at the bottom right.
Enter "192.168.2.15" for the Address, and "58888" for the Port.
Click on the "Connect" button to save your connection.

When you're ready to run the example, you can click on the "Run" icon located at the bottom of the XDK editor.
This will send the code to the Edison, and it will run there.

### Directly On Edison

Alternatively, you can set up the code directly on the Edison yourself.

To get started, you can follow [this guide to installing Git on the Edison](https://github.com/intel-iot-devkit/edison-guides/wiki/Installing-Git-on-Intel-Edison).

Then, you can clone the repo onto your Edison after SSHing into it:

    $ git clone https://github.com/hybridgroup/intel-iot-examples.git

Then, navigate to the directory with this example.

### Connecting The Grove Sensors

![](./../../../images/alarm-clock.jpg)

You will need to have the Grove Shield connected to the Arduino-compatible breakout board, in order to plug in all the various Grove devices into the Grove shield. Make sure you have the tiny VCC switch on the Grove Shield set to the "5V" position.

Plug one end of a Grove cable into the "Rotary Analog Sensor", then connect the other end to the "A0" port on the Grove Shield.

Connect one end of a Grove cable into the "Button", then plug the other end into the "D4" port on the Grove Shield.

Plug one end of a Grove cable into the "Buzzer", then connect the other end to the "D5" port on the Grove Shield.

Connect one end of a Grove cable into the "RGB LCD", then plug the other end into any of the "I2C" ports on the Grove Shield.

### Intel Edison setup

If you're running this code on your Edison manually, you'll need to install some dependencies.

To obtain the various Node.js modules needed for this example to execute on the Intel Edison, run:

```
npm install
```

### Weather Underground API Key

To optionally fetch the real-time weather information, you will need to get an API key from the Weather Underground web site at http://www.wunderground.com/weather/api/

You will not be able to retrieve weather conditions without obtaining a Weather Underground API key first. You can still run the example, just without the weather data.

Pass the Weather Underground API key to the example program, by using the `WEATHER_API_KEY` ENV variable like this:

```
WEATHER_API_KEY="YOURAPIKEY" node index.js
```

### Microsoft Azure server setup

You can optionally store the data generated by this example program in a backend database deployed using Microsoft Asuze, Node.js, and the Redis datastore.

For information on how to setup your own cloud data server, go to:

https://github.com/hybridgroup/intel-iot-examples-datastore

## Running The Example

To run the example:

```
node index.js
```

To run the example with the optional real-time weather:

```
WEATHER_API_KEY="YOURAPIKEY" node index.js
```

To run the example with the optional Microsoft Azure datastore:

```
SERVER="http://intel-examples.azurewebsites.net/logger/alarm-clock" AUTH_TOKEN="YOURTOKEN" node index.js
```

To run the example with the both the weather and Microsoft Azure datastore:

```
WEATHER_API_KEY="YOURAPIKEY" SERVER="http://intel-examples.azurewebsites.net/logger/alarm-clock" AUTH_TOKEN="YOURTOKEN" node index.js
```
### Setting The Alarm

The alarm is set using a single page web interface that is served up from the Intel Edison itself while the example program is running.

The web server runs on the Intel Edison's port 3000, so if the Intel Edison is connected to WiFi on `192.168.1.13`, the address to browse to if you are on the same network is `http://192.168.1.13:3000`.

### Determining The Intel Edison IP Address

You can determine what IP address the Intel Edison is connected to by running:

```
ip addr show | grep wlan
```

You will see output similar to:

```
3: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast qlen 1000
    inet 192.168.1.13/24 brd 192.168.1.255 scope global wlan0
```
The IP address is shown next to `inet`. In the example above, the IP address is `192.168.1.13`
